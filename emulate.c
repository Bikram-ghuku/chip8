// Following http://devernay.free.fr/hacks/chip8/C8TECH10.HTM#0.1

#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include<string.h>
#include<SDL2/SDL.h>
#include<SDL2/SDL_render.h>

// Memory
uint8_t ram[4096] = {0};

// Register
uint8_t V[16] = {0};
uint16_t I = 0;
uint8_t delay = 0, sound = 0;
uint16_t pc = 0;
uint16_t stack[16] = {0};
uint16_t *sp = stack;

// Keyboard
uint32_t keypad[16] = {0};

// Display
uint32_t display[64 * 32] = {0};

const char font[] = {
    0xF0, 0x90, 0x90, 0x90, 0xF0,
    0x20, 0x60, 0x20, 0x20, 0x70,
    0xF0, 0x10, 0xF0, 0x80, 0xF0,
    0xF0, 0x10, 0xF0, 0x10, 0xF0,
    0x90, 0x90, 0xF0, 0x10, 0x10,
    0xF0, 0x80, 0xF0, 0x10, 0xF0,
    0xF0, 0x80, 0xF0, 0x90, 0xF0,
    0xF0, 0x10, 0x20, 0x40, 0x40,
    0xF0, 0x90, 0xF0, 0x90, 0xF0,
    0xF0, 0x90, 0xF0, 0x10, 0xF0,
    0xF0, 0x90, 0xF0, 0x90, 0x90,
    0xE0, 0x90, 0xE0, 0x90, 0xE0,
    0xF0, 0x80, 0x80, 0x80, 0xF0,
    0xE0, 0x90, 0x90, 0x90, 0xE0,
    0xF0, 0x80, 0xF0, 0x80, 0xF0, 
    0xF0, 0x80, 0xF0, 0x80, 0x80 
};

int main(int argc, char** argv){

    srand(time(0));

    if (argc < 2) {
        printf(" NO ROM PASSED\n");
        exit(EXIT_FAILURE);
    }

    FILE *file = fopen(argv[1], "rb");

    if (!file) {
        printf(" ROM File is invalid\n");
    }

    SDL_Init(SDL_INIT_EVERYTHING);

    SDL_Window* win = SDL_CreateWindow(strcat(argv[1], " - Chip8"), SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 640, 320, 0);
    SDL_Renderer* rendered = SDL_CreateRenderer(win, -1, SDL_RENDERER_ACCELERATED);

    int x; scanf("%d", &x);
    return 0;
}